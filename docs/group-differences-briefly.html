<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Group differences (briefly) | Data Fluency</title>
  <meta name="description" content="Group differences (briefly) | Data Fluency" />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="Group differences (briefly) | Data Fluency" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Group differences (briefly) | Data Fluency" />
  
  
  

<meta name="author" content="Ben Whalley and Chris Berry" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="missing-data.html">
<link rel="next" href="undergraduate-stats-in-r.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<link href="media/webex.css" rel="stylesheet" />
<link href="media/psystats.css" rel="stylesheet" />
<script src="media/webex.js"></script>
<script src="media/psystats.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-118343766-4"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-118343766-4');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Fluency</a></li>

<li class="divider"></li>
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="" data-path="approach-of-this-course.html"><a href="approach-of-this-course.html"><i class="fa fa-check"></i>Approach of this course</a></li>
<li class="chapter" data-level="" data-path="format-of-the-sessions.html"><a href="format-of-the-sessions.html"><i class="fa fa-check"></i>Format of the sessions</a></li>
<li class="chapter" data-level="" data-path="the-most-important-thing-of-all.html"><a href="the-most-important-thing-of-all.html"><i class="fa fa-check"></i>The most important thing of all</a></li>
<li class="chapter" data-level="" data-path="list-of-sessions.html"><a href="list-of-sessions.html"><i class="fa fa-check"></i>List of sessions</a></li>
<li class="chapter" data-level="" data-path="access-to-r.html"><a href="access-to-r.html"><i class="fa fa-check"></i>Access to R</a></li>
<li class="chapter" data-level="" data-path="reasons-to-use-r.html"><a href="reasons-to-use-r.html"><i class="fa fa-check"></i>Why do we use R?</a></li>
<li class="chapter" data-level="" data-path="teachers-notes.html"><a href="teachers-notes.html"><i class="fa fa-check"></i>Teachers’ notes</a></li>
<li class="chapter" data-level="" data-path="week-by-week-resources.html"><a href="week-by-week-resources.html"><i class="fa fa-check"></i>Week-by-week resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="assessments.html"><a href="assessments.html"><i class="fa fa-check"></i>Assessments</a><ul>
<li class="chapter" data-level="" data-path="core-skills-test.html"><a href="core-skills-test.html"><i class="fa fa-check"></i>Core skills test</a></li>
<li class="chapter" data-level="" data-path="analysis-and-visualisation-task.html"><a href="analysis-and-visualisation-task.html"><i class="fa fa-check"></i>Analysis and visualisation task</a></li>
<li class="chapter" data-level="" data-path="assessment-authentic-analysis.html"><a href="assessment-authentic-analysis.html"><i class="fa fa-check"></i>Authentic analysis assessment</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="beginners.html"><a href="beginners.html"><i class="fa fa-check"></i>BeginneRs</a><ul>
<li class="chapter" data-level="" data-path="getting-started-rstudio.html"><a href="getting-started-rstudio.html"><i class="fa fa-check"></i>Getting started with RStudio</a></li>
<li class="chapter" data-level="" data-path="exploring-data-brief.html"><a href="exploring-data-brief.html"><i class="fa fa-check"></i>Exploring data (in brief)</a></li>
<li class="chapter" data-level="" data-path="inspecting-data.html"><a href="inspecting-data.html"><i class="fa fa-check"></i>Inspecting data</a></li>
<li class="chapter" data-level="" data-path="missing-data.html"><a href="missing-data.html"><i class="fa fa-check"></i>Missing data</a></li>
<li class="chapter" data-level="" data-path="group-differences-briefly.html"><a href="group-differences-briefly.html"><i class="fa fa-check"></i>Group differences (briefly)</a></li>
<li class="chapter" data-level="" data-path="undergraduate-stats-in-r.html"><a href="undergraduate-stats-in-r.html"><i class="fa fa-check"></i>Undergraduate stats in R</a></li>
<li class="chapter" data-level="" data-path="sequences-and-designs.html"><a href="sequences-and-designs.html"><i class="fa fa-check"></i>Sequences and designs</a></li>
<li class="chapter" data-level="" data-path="more-reading-data.html"><a href="more-reading-data.html"><i class="fa fa-check"></i>Reading data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualisation.html"><a href="visualisation.html"><i class="fa fa-check"></i>Visualisation and plotting</a><ul>
<li class="chapter" data-level="" data-path="session1.html"><a href="session1.html"><i class="fa fa-check"></i>Session 1</a></li>
<li class="chapter" data-level="" data-path="countries-200-years.html"><a href="countries-200-years.html"><i class="fa fa-check"></i>200 countries, 200 years…</a></li>
<li class="chapter" data-level="" data-path="into-the-third-and-fourth-and-fifth-dimension.html"><a href="into-the-third-and-fourth-and-fifth-dimension.html"><i class="fa fa-check"></i>Into the third (and fourth, and fifth…) dimension</a></li>
<li class="chapter" data-level="" data-path="layers.html"><a href="layers.html"><i class="fa fa-check"></i>Layers</a></li>
<li class="chapter" data-level="" data-path="facets.html"><a href="facets.html"><i class="fa fa-check"></i>Facets</a></li>
<li class="chapter" data-level="" data-path="ggplot-scales.html"><a href="ggplot-scales.html"><i class="fa fa-check"></i>Scales</a></li>
<li class="chapter" data-level="" data-path="comparing-categories.html"><a href="comparing-categories.html"><i class="fa fa-check"></i>Comparing categories</a></li>
<li class="chapter" data-level="" data-path="spit-and-polish.html"><a href="spit-and-polish.html"><i class="fa fa-check"></i>Spit and polish</a></li>
<li class="chapter" data-level="" data-path="session-2-real-world-plots.html"><a href="session-2-real-world-plots.html"><i class="fa fa-check"></i>Session 2: Real world plots</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-handling.html"><a href="data-handling.html"><i class="fa fa-check"></i>Data handling</a><ul>
<li class="chapter" data-level="" data-path="overview-1.html"><a href="overview-1.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="" data-path="making-new-variables.html"><a href="making-new-variables.html"><i class="fa fa-check"></i>Making new variables</a></li>
<li class="chapter" data-level="" data-path="reshaping-melting.html"><a href="reshaping-melting.html"><i class="fa fa-check"></i>Reshaping (melting)</a></li>
<li class="chapter" data-level="" data-path="reshaping-wide-casting.html"><a href="reshaping-wide-casting.html"><i class="fa fa-check"></i>Reshaping wide (casting)</a></li>
<li class="chapter" data-level="" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i>RMarkdown</a></li>
<li class="chapter" data-level="" data-path="final-task-to-be-completed-as-homework.html"><a href="final-task-to-be-completed-as-homework.html"><i class="fa fa-check"></i>Final task (to be completed as homework)</a></li>
<li class="chapter" data-level="" data-path="extension-exercises-and-reading.html"><a href="extension-exercises-and-reading.html"><i class="fa fa-check"></i>Extension exercises and reading</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i>Regression</a><ul>
<li class="chapter" data-level="" data-path="session-1.html"><a href="session-1.html"><i class="fa fa-check"></i>Session 1</a></li>
<li class="chapter" data-level="" data-path="how-useful-are-the-lines.html"><a href="how-useful-are-the-lines.html"><i class="fa fa-check"></i>How useful are the lines?</a></li>
<li class="chapter" data-level="" data-path="using-r-for-regression.html"><a href="using-r-for-regression.html"><i class="fa fa-check"></i>Using R for regression</a></li>
<li><a href="the-first-step-is-always-plotting.html#the-first-step-is-always-plotting">The first step is <strong>always</strong> plotting</a></li>
<li class="chapter" data-level="" data-path="automatic-line-fitting.html"><a href="automatic-line-fitting.html"><i class="fa fa-check"></i>Automatic line-fitting</a></li>
<li class="chapter" data-level="" data-path="first-lm.html"><a href="first-lm.html"><i class="fa fa-check"></i>Putting numbers to lines</a></li>
<li class="chapter" data-level="" data-path="regresion-hand-predictions.html"><a href="regresion-hand-predictions.html"><i class="fa fa-check"></i>Making predictions (by hand)</a></li>
<li class="chapter" data-level="" data-path="regression-thinking-causes.html"><a href="regression-thinking-causes.html"><i class="fa fa-check"></i>Thinking about causes</a></li>
<li class="chapter" data-level="" data-path="moderation-intro.html"><a href="moderation-intro.html"><i class="fa fa-check"></i>‘Effect modification’</a></li>
<li class="chapter" data-level="" data-path="tricky-relationships.html"><a href="tricky-relationships.html"><i class="fa fa-check"></i>‘Tricky’ relationships</a></li>
<li class="chapter" data-level="" data-path="diagrams-and-models.html"><a href="diagrams-and-models.html"><i class="fa fa-check"></i>Diagrams and models</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="multiple-regression.html"><a href="multiple-regression.html"><i class="fa fa-check"></i>Multiple regression</a><ul>
<li class="chapter" data-level="" data-path="why-multiple-regression.html"><a href="why-multiple-regression.html"><i class="fa fa-check"></i>Why use multiple regression?</a></li>
<li class="chapter" data-level="" data-path="regression-interaction.html"><a href="regression-interaction.html"><i class="fa fa-check"></i>Different relationships?</a></li>
<li><a href="fit-multiple-regression.html#fit-multiple-regression">Using <code>lm</code> for multiple regression</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="uncertainty.html"><a href="uncertainty.html"><i class="fa fa-check"></i>Uncertainty</a><ul>
<li class="chapter" data-level="" data-path="overview-3.html"><a href="overview-3.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="" data-path="calculating-intervals.html"><a href="calculating-intervals.html"><i class="fa fa-check"></i>Calculating intervals</a></li>
<li class="chapter" data-level="" data-path="recap-on-intervals.html"><a href="recap-on-intervals.html"><i class="fa fa-check"></i>Recap on intervals</a></li>
<li class="chapter" data-level="" data-path="beyond-intervals-extension-exercises.html"><a href="beyond-intervals-extension-exercises.html"><i class="fa fa-check"></i>Beyond intervals (extension exercises)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="fitting-curves.html"><a href="fitting-curves.html"><i class="fa fa-check"></i>Fitting curves</a><ul>
<li class="chapter" data-level="" data-path="session-1-1.html"><a href="session-1-1.html"><i class="fa fa-check"></i>Session 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="building-models.html"><a href="building-models.html"><i class="fa fa-check"></i>Building models</a><ul>
<li class="chapter" data-level="" data-path="session-1-multiple-regression.html"><a href="session-1-multiple-regression.html"><i class="fa fa-check"></i>Session 1: Multiple regression</a></li>
<li class="chapter" data-level="" data-path="session-2-anova-and-bayes-factor.html"><a href="session-2-anova-and-bayes-factor.html"><i class="fa fa-check"></i>Session 2: Anova and Bayes Factor</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="testing.html"><a href="testing.html"><i class="fa fa-check"></i>Testing</a><ul>
<li><a href="session-1-planned-contrasts-with-emmeans.html#session-1-planned-contrasts-with-emmeans">Session 1: Planned contrasts with <code>emmeans</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="communicating-results.html"><a href="communicating-results.html"><i class="fa fa-check"></i>Communicating results</a><ul>
<li class="chapter" data-level="" data-path="session-1-communicating-anova-and-regression.html"><a href="session-1-communicating-anova-and-regression.html"><i class="fa fa-check"></i>Session 1: Communicating Anova and Regression</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="real-world-data.html"><a href="real-world-data.html"><i class="fa fa-check"></i>Real world data</a><ul>
<li class="chapter" data-level="" data-path="session-1-reproducing-a-real-paper.html"><a href="session-1-reproducing-a-real-paper.html"><i class="fa fa-check"></i>Session 1: Reproducing a real paper</a></li>
<li class="chapter" data-level="" data-path="session-2-reproducing-a-real-paper.html"><a href="session-2-reproducing-a-real-paper.html"><i class="fa fa-check"></i>Session 2: Reproducing a real paper</a></li>
<li class="chapter" data-level="" data-path="session-3-reproducing-a-real-paper.html"><a href="session-3-reproducing-a-real-paper.html"><i class="fa fa-check"></i>Session 3: Reproducing a real paper</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="extras.html"><a href="extras.html"><i class="fa fa-check"></i>Extras</a><ul>
<li class="chapter" data-level="" data-path="keyboard-shortcuts.html"><a href="keyboard-shortcuts.html"><i class="fa fa-check"></i>Keyboard shortcuts</a></li>
<li class="chapter" data-level="" data-path="common-problems.html"><a href="common-problems.html"><i class="fa fa-check"></i>Common problems</a></li>
<li class="chapter" data-level="" data-path="cheatsheet.html"><a href="cheatsheet.html"><i class="fa fa-check"></i>Cheatsheet</a></li>
<li class="chapter" data-level="" data-path="sample-n.html"><a href="sample-n.html"><i class="fa fa-check"></i>More sampling</a></li>
<li class="chapter" data-level="" data-path="more-on-tibbles.html"><a href="more-on-tibbles.html"><i class="fa fa-check"></i>More on Tibbles</a></li>
<li class="chapter" data-level="" data-path="regression-extra-explanations.html"><a href="regression-extra-explanations.html"><i class="fa fa-check"></i>Regression - extra explanations</a></li>
<li class="chapter" data-level="" data-path="bayesian-estimation-of-the.html"><a href="bayesian-estimation-of-the.html"><i class="fa fa-check"></i>Bayesian estimation of the</a></li>
<li class="chapter" data-level="" data-path="confidence-intervals-explanation.html"><a href="confidence-intervals-explanation.html"><i class="fa fa-check"></i>What do confidence intervals mean?</a></li>
<li class="chapter" data-level="" data-path="bayesian-estimation-of-the-1.html"><a href="bayesian-estimation-of-the-1.html"><i class="fa fa-check"></i>Bayesian estimation of the</a></li>
<li class="chapter" data-level="" data-path="other-tips.html"><a href="other-tips.html"><i class="fa fa-check"></i>Other tips</a></li>
<li class="chapter" data-level="" data-path="wider-reading.html"><a href="wider-reading.html"><i class="fa fa-check"></i>Wider reading</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="./LICENCE" target="blank">Licence: CC BY-SA 4</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Fluency</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="group-differences-briefly" class="section level2">
<h2>Group differences (briefly)</h2>
<div id="before-you-start" class="section level3">
<h3>Before you start…</h3>
<p>Before starting this worksheet, you should have had a brief introduction to using RStudio –
<a href="getting-started-rstudio.html#getting-started-rstudio">Using RStudio</a>. You should also have also completed the worksheet
<a href="#exploring-data">Exploring Data</a>. If not, take a look these earlier worksheets before continuing.</p>
<p>If you have completed those worksheets, then you’ll have set up an R project, and you’ll have a
script in it that looks something like this:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">library</span>(mice)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">cpsdata &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;cps2.csv&quot;</span>)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">cpsdata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="kw">mean</span>(income))</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">cpsdata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="kw">mean</span>(hours, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<p>In this worksheet, we’ll add some more commands to this script.</p>
<div id="contents-1" class="section level4">
<h4>Contents</h4>
<ul>
<li><a href="group-differences-briefly.html#grouping-data">Grouping data</a></li>
<li><a href="group-differences-briefly.html#group-density">Drawing a density plot</a></li>
<li><a href="group-differences-briefly.html#filtering-data">Filtering data</a></li>
<li><a href="group-differences-briefly.html#grouping-data-exercise-1">Exercise</a></li>
</ul>
</div>
</div>
<div id="grouping-data" class="section level3">
<h3>Grouping data</h3>
<p>One of the most widely discussed issues concerning income is the difference between what men and
women, on average, get paid. Let’s have a look at that difference in our teaching sample of 10,000
US participants.</p>
<p>In order to do this, we need to split our data into two groups – males and females. In R, the
command <code>group_by</code> allows us to do this. In this case, we want to group the data by biological sex,
so the command is <code>group_by(sex)</code>. We <em>pipe</em> (<code>%&gt;%</code>) the data in <code>cpsdata</code> to the <code>group_by</code> command
in order to group it, and then we <em>pipe</em> (<code>%&gt;%</code>) it to <code>summarise</code> to get a summary for each group
(a mean, in this case). So, the full command is:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">cpsdata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="kw">mean</span>(income))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span><span class="co"># A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="er">&gt;</span><span class="st">   </span>sex    <span class="st">`</span><span class="dt">mean(income)</span><span class="st">`</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">           </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="er">&gt;</span><span class="st"> </span><span class="dv">1</span> female         <span class="fl">82677.</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> male           <span class="fl">92137.</span></a></code></pre></div>
<p>Copy it into your script and run it (CTRL+ENTER). Women in our made-up sample get paid, on average,
around 9,000 (9k) less than men. Of course, not every male gets 92k a year in the US, and not every
female gets 83k. It seems very likely that the range of incomes earned by men and women overlap –
meaning that if you picked one man and one woman at random, there’s a reasonable chance that the
woman earns more than the man. We can look at this <em>variation</em> in pay using a graph.</p>
</div>
<div id="group-density" class="section level3">
<h3>Looking at variation using a density plot</h3>
<p>The graph we’re going to draw is a density plot. If you recall histograms from school, it’s a lot
like that. If not, don’t worry. A density plot is a curve that shows how likely a range of incomes
are. So, the higher the curve is at a particular income, the more people who have that income.</p>
<p>We’re going to produce what’s called a <em>scaled</em> density plot. The highest point on a scaled density
plot is always one. This can make it easier to compare two groups, particularly if one group has
fewer people in it than the other.</p>
<p>So here’s the command to do a scaled density plot for incomes, plotting men and women separately.
Copy it into your script and run it (CTRL+ENTER).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">cpsdata <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(income, <span class="dt">colour=</span>sex)) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">   </span><span class="kw">geom_density</span>(<span class="kw">aes</span>(<span class="dt">y=</span>..scaled..))</a></code></pre></div>
<p><img src="01-beginning_files/figure-html/group-density-1.png" width="672" /></p>
<div id="explanation-of-command" class="section level4">
<h4>Explanation of command</h4>
<p>Here’s what each part of this command means:</p>
<ul>
<li><p><code>cpsdata</code> - The data frame containing the data. You created this in the last worksheet.</p></li>
<li><p><code>%&gt;%</code> - A pipe. As in the last worksheet, this pipe carries the data in <code>cpsdata</code> to the next
part of the command, which does something with it.</p></li>
<li><p><code>ggplot()</code> - This means ‘draw me a graph’. All graphs we use in these worksheets use the
<em>Grammar for Graphics</em> (gg) plotting commands, so they’ll all include the command <code>ggplot</code>.</p></li>
<li><p><code>aes()</code> - Short for <em>aesthetics</em> (what things look like). It means ‘This is the sort of graph I
want’.</p></li>
<li><p><code>income</code> - I want a graph of the data in the <code>income</code> column of <code>cpsdata</code></p></li>
<li><p><code>color=sex</code> - I want you to give me two graphs on top of each other, in different colours. One
colour for men, a different color for women. Use the <code>sex</code> column of <code>cpsdata</code> to work out who
is male and who is female.</p></li>
<li><p><code>geom_density()</code> - I want this graph to be a <em>density</em> plot.</p></li>
<li><p><code>aes(y=..scaled..)</code> - I want this density plot to be <em>scaled</em> (see above).</p></li>
</ul>
</div>
<div id="discussion-of-output" class="section level4">
<h4>Discussion of output</h4>
<p>Your graph will appear in the bottom-right window, and should look like the one above. You’ll notice
that the two lines seem basically on top of each other … but they can’t be because we know the two
groups differ in mean income by over nine thousand dollars! We have a problem to solve…</p>
</div>
</div>
<div id="extreme-data" class="section level3">
<h3>Dealing with extreme data points</h3>
<p>The problem is one of scale – there are a small number of people who earn very high salaries. In
fact, both the highest-paid man, and the highest-paid woman in our sample earn considerably more
than one million dollars a year.</p>
<div id="filtering-data" class="section level4">
<h4>Filtering data</h4>
<p>Somehow, we need to deal with the fact that a few people in our sample are very well paid, which
makes the difference between men and women hard to see on our graph, despite the difference being
over nine thousand dollars a year.</p>
<p>One of the easiest ways around this is to exclude these very high salaries from our graph.</p>
<p>The vast majority of people are paid less than 150k a year. So, let’s restrict our plotting to just
those people. We do this using the <code>filter</code> command. It’s called <em>filter</em> because it works a bit
like the filter paper in a chemistry lab (or in your coffee machine) – stopping some things, while
letting other things pass through. We can filter our data by telling R <em>what data we want to keep</em>.
Here, we want to keep all people who earn less than £150k, and filter out the rest. So the filter we
need is <code>filter(income &lt; 150000)</code>, where <code>&lt;</code> means “less than”.</p>
<p>We’ll be using this dataset of people with &lt;$150k incomes a few times, so we’re going to give it a
new name, <code>cpslow</code> (or any other name you want, e.g. <em>angelface</em> )</p>
<p>So, what we need to do is <em>pipe</em> (<code>%&gt;%</code>) our <code>cpsdata</code> data to our <code>filter(income &lt; 150000)</code>, and
use an arrow, <code>&lt;-</code>, to send this data to our new <em>data frame</em>, <code>cpslow</code>. Recall that <code>&lt;-</code> sends the
thing on its right to the thing on its left, so the full command is:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">cpslow &lt;-<span class="st"> </span>cpsdata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(income <span class="op">&lt;</span><span class="st"> </span><span class="dv">150000</span>)</a></code></pre></div>
<p>We can take a look at this new <em>data frame</em> by clicking on it in RStudio’s <em>Environment</em> window (see
<a href="other-tips.html#rstudio-environment-pane">video here</a> if you’re not sure how). By looking at the ID numbers, you
can see that some people in our original sample have been taken out, because they earned at least
150k.</p>
<p>Now, we can plot these filtered data in the same way as before, by changing the name of the
dataframe from <code>cpsdata</code> to <code>cpslow</code>.</p>
<p><strong>So start with the command</strong>
<code>cpsdata %&gt;% ggplot(aes(income, colour=sex)) + geom_density(aes(y=..scaled..))</code>, copy it onto the
next line in your script, <strong>make that change, and press CTRL+RETURN.</strong></p>
<p>If you’ve got it right, your graph will look like this:</p>
<p><img src="01-beginning_files/figure-html/group-density-filtered-1.png" width="672" /></p>
<p>At first glance, the two distributions of incomes still look similar. For example, the
<a href="https://en.wikipedia.org/wiki/Mode_(statistics)"><em>modal</em></a> income is at quite a low income, and
that income is quite similar for both men and women. However, on closer inspection, you’ll also see
that the red line (females) is above the blue line (men) until about 25-50k, and below the blue line
from then on. This means that more women than men earn less than 50k, and more men than women earn
more than 50k.</p>
<p>So, the gender pay gap is visible in this graph. The graph also illustrates that the difference in
this sample is small, relative to the range of incomes. This doesn’t mean that the gender pay gap is
less (or more) important than income inequality. These kinds of questions of importance are moral,
philosophical, and political. Data cannot directly answer these kinds of questions, but they can
provide information to inform the debate.</p>
<p>As we’ll see later, this type of graph is also crucial to inform our choice of statistical models
(like regression or Anova): Without a clear sense of what the data <em>look</em> like we can make bad
decisions in our analyses.</p>
</div>
</div>
<div id="grouping-data-exercise-1" class="section level3 exercise">
<h3>Exercise</h3>
<p>This exercise consolidates what you’ve learned so far.</p>
<p><strong>The task is to further examine the sub-sample of participants who are living in the US, and
earning less than $150k (<code>cpslow</code>).</strong></p>
<p>Specifically, the question to answer is whether people born in the US earn more. In order to do
this, you should calculate the mean income for each group, and produce a density plot with one line
for each group. Below are the answers you are aiming for:</p>
<pre><code>&gt; # A tibble: 2 x 2
&gt;   native  `mean(income)`
&gt;   &lt;chr&gt;            &lt;dbl&gt;
&gt; 1 foreign         78408.
&gt; 2 native          88480.</code></pre>
<p><img src="01-beginning_files/figure-html/ex1-1.png" width="672" /></p>
<p>Previously, we calculated the mean salary of men and women.</p>
<ol style="list-style-type: decimal">
<li>Why might it be a better idea to calculate the median?</li>
</ol>
<div class="solution">
<button>
Show answer
</button>
<p>Because the data are strongly skewed, the median may be a better summary of the central tendency
(the middle).</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Adapt the commands above to calculate the median instead. What is the median salary for women:
<span id="Q601716" class="webex-fitb"><input class='solveme  nospaces' data-digits=4 size=5  style='width:5em;'  data-answer='["52558"]'/><span class="solvedme"></span></span>, and for men: <span id="Q740918" class="webex-fitb"><input class='solveme  nospaces' data-digits=4 size=5  style='width:5em;'  data-answer='["61746"]'/><span class="solvedme"></span></span>.</li>
</ol>
<div class="solution">
<button>
Show answers
</button>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">cpsdata <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">med=</span><span class="kw">median</span>(income))</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span><span class="co"># A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="er">&gt;</span><span class="st">   </span>sex       med</a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="er">&gt;</span><span class="st"> </span><span class="dv">1</span> female <span class="fl">52558.</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> male   <span class="fl">61746.</span></a></code></pre></div>
</div>
</div>
<div id="extension-exercise" class="section level3 exercise">
<h3>Extension exercise</h3>
<p>If you’ve some spare time and are looking for something a bit more challenging, try Exercise 2 on
this slightly
<a href="https://ajwills72.github.io/rminr/group-differences.html#ex2">more advanced worksheet</a>.</p>
<!--





 -->
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="missing-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="undergraduate-stats-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
